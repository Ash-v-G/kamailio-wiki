====== Kamailio SIP Server (SER) - New Features in Devel Version ======

**Current devel version will be numbered 5.3.0 and it is planned to be released during 2019**.

<fc #0000FF>
**Previous devel, current stable, version was 5.2.x (released on November, 2018), see what was new in that release at:**
</fc>
  * <fc #0000FF>http://www.kamailio.org/wiki/features/new-in-5.2.x</fc>

<fc #800000>//This is a draft of new features added in devel version, manually updated, thus not always synchronized with what is new in source code repository.//</fc>

===== New Modules =====

==== app_lua_sr ====

Old **sr** module exported to Lua scripting.

  * https://www.kamailio.org/docs/modules/devel/modules/app_lua_sr.html

==== xhttp_prom ====

Generates suitable metrics for a Prometheus monitoring platform, answering to Prometheus pull requests (HTTP requests to /metrics URL).

  * https://www.kamailio.org/docs/modules/devel/modules/xhttp_prom.html

==== kemix ====

KEMI specific extensions.

  * https://www.kamailio.org/docs/modules/devel/modules/kemix.html

==== rtp_media_server ====

Embedded RTP and media processing functionalities for Kamailio

  * https://www.kamailio.org/docs/modules/devel/modules/rtp_media_server.html

==== secfilter ====

Filters to allow/block using whitelists/blacklist based on user agents, IP addresses, countries, domains and users. SQL injection attacks prevention. Blacklist of destinations where the called number is not allowed.

  * https://www.kamailio.org/docs/modules/devel/modules/secfilter.html
===== New in existing Modules =====

==== cnxcc ====

Added a new param in the cnxcc_set_max_credit() function to set the connect cost of a call.

  * https://www.kamailio.org/docs/modules/devel/modules/cnxcc.html#cnxcc.f.set_max_credit

==== dialplan ====

Add reload_delta parameter to the dialplan module. Make the rate limit of maximum allowed dialplan reload configurable.

  * https://www.kamailio.org/docs/modules/devel/modules/dialplan.html#dialplan.p.reload_delta

==== uac ====

New modparam reg_gc_interval, to define a value for garbage collection interval

  * https://www.kamailio.org/docs/modules/devel/modules/uac.html#uac.p.reg_gc_interval

The uac_replace_from/uac_replace_to function (with dialog storage option) will now also work properly after a restart from Kamailio, if dialog data is stored in a database.

==== registrar ====

New parameter lookup_filter_mode for the registrar module to control what filters should be applied for lookup(...) operations. Filter values are specified via filed of xavp_cfg.

  * https://www.kamailio.org/docs/modules/devel/modules/registrar.html#registrar.p.lookup_filter_mode


==== presence ====

A new rpc command updateWatchers were added to the presence module.

  * https://www.kamailio.org/docs/modules/devel/modules/presence.html#presence.rpc.updateWatchers

==== kex ====

New rpc command mod.mem_statsx for the kex module, to print also the count of allocated chunks in summary.

  * https://www.kamailio.org/docs/modules/devel/modules/kex.html#kex.r.mod.mem_statsx

==== ims_ipsec_pcscf ====

Add IPv6 support to the ims_ipsec_pcscf module. Additional support for multiple TCP connections was added.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_ipsec_pcscf.html

==== ims_registrar_pcscf ====

Add support for multiple TCP connections to the ims_registrar_pcscf module.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_registrar_pcscf.html

==== ims_usrloc_pcscf ====

Add support for multiple TCP connections to the ims_usrloc_pcscf module.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_usrloc_pcscf.html

==== ims_isc ====

Add functionality to a add-on to third party registration in S-CSCF. The feature assumes two new flags in HSS database, where additional to the "Service Info XML" an "insertRegisterRequest" flag or an "insertRegisterResponse" flag can be set. These flags are sent with the SAR/SAA exchange to the S-CSCF. More information can be found in the commit message (99b2cfaf4151968a62) and the module documentation.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_isc.html

==== ims_usrloc_scscf ====

Add-on to third party registration in S-CSCF to the ims_usrloc_scscf module.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_usrloc_scscf.html

==== ims_registrar_scscf ====

Add-on to third party registration in S-CSCF to the ims_registrar_scscf module.

  * https://www.kamailio.org/docs/modules/devel/modules/ims_registrar_scscf.html


===== New in Core =====

==== Command line arguments ====

Adding support for long option names, to kamailio. This makes it easier to deploy Kamailio in dynamic environments like containers. Examples:

  * add domain aliases with --alias
  * set advertised address to listen sockets speficied with -l socket/advertise
  * set server id with --server-id
  * set a subst, substdef or substdefs preprocessor expression with --subst, --substdef or --substdefs

More information: https://www.kamailio.org/w/2019/05/kamailio-command-line-arguments/

==== Interpreter ====

==== Parameters ====

  * New global parameter bind_ipv6_link_local. If set to 1, try to bind also IPv6 link local addresses by discovering the scope of the interface. This apply for UDP socket for now, to be added for the other protocols.

==== Functions ====

==== Memory Managers ====

Refactoring and unification of memory allocation error logging infrastructure. Completed in the core, major modules were migrated as well.
==== Architecture ====

  * Extend internal IPv4 and IPv6 parsing functions in the core

==== kamailio.cfg ====

===== Tools =====

==== kamcmd ====

==== kamctl ====
    
==== kamcli ====
