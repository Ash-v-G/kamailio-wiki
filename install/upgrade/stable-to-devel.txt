====== Upgrade Kamailio from v4.1.x to v4.2.0 (devel) ======

The page contains the details about the changes that were made to old components during the development of v4.2.0 compared with what existed in v4.1.x. It does not include the brand new modules, focusing on how to upgrade database and configuration file from v4.1.x to run with Kamailio devel.

===== Previous Stable Release =====

If you look for the guidelines to upgrade to previous stable release, see:

  * [[install:upgrade:4.0.x-to-4.1.0|Upgrade Kamailio v4.0.x to v4.1.0]]

===== Modules =====

==== usrloc ====

  * default value for hash_size is 10 (1024 slots) (informational - no action required in old config)

===== Core =====

==== Parameters ====

Changes to default values:

  * pkg (private) memory size: 8MB (informational - no action required in old config)

===== Database =====

==== MySQL ====

=== Old Tables ===

Run following SQL statements in MySQL client to upgrade database structure from v4.1 to v4.2:

<code sql>
-- table: acc
ALTER TABLE acc CHANGE COLUMN sip_reason sip_reason varchar(128) DEFAULT '' NOT NULL;
DELETE FROM version WHERE table_name='acc';
INSERT INTO version (`table_name`, `table_version`) values ('acc','5');

-- table: dialplan
ALTER TABLE dialplan CHANGE COLUMN repl_exp repl_exp varchar(64) NOT NULL; 
ALTER TABLE dialplan CHANGE COLUMN attrs attrs varchar(64) NOT NULL;
DELETE FROM version WHERE table_name='dialplan';
INSERT INTO version (`table_name`, `table_version`) values ('dialplan','2');

-- table: missed_calls
ALTER TABLE missed_calls CHANGE COLUMN sip_reason sip_reason varchar(128) DEFAULT '' NOT NULL;
DELETE FROM version WHERE table_name='missed_calls';
INSERT INTO version (`table_name`, `table_version`) values ('missed_calls','4');

</code>